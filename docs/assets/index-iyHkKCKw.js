(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var ee,d,Pt,T,Ke,kt,$t,Rt,Ee,ye,ge,Ct,Q={},It=[],bn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,te=Array.isArray;function k(t,e){for(var n in e)t[n]=e[n];return t}function Pe(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function S(t,e,n){var r,o,i,s={};for(i in e)i=="key"?r=e[i]:i=="ref"?o=e[i]:s[i]=e[i];if(arguments.length>2&&(s.children=arguments.length>3?ee.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)s[i]===void 0&&(s[i]=t.defaultProps[i]);return G(t,s,r,o,null)}function G(t,e,n,r,o){var i={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++Pt,__i:-1,__u:0};return o==null&&d.vnode!=null&&d.vnode(i),i}function ke(){return{current:null}}function $(t){return t.children}function E(t,e){this.props=t,this.context=e}function N(t,e){if(e==null)return t.__?N(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?N(t):null}function Dt(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Dt(t)}}function we(t){(!t.__d&&(t.__d=!0)&&T.push(t)&&!ue.__r++||Ke!=d.debounceRendering)&&((Ke=d.debounceRendering)||kt)(ue)}function ue(){for(var t,e,n,r,o,i,s,_=1;T.length;)T.length>_&&T.sort($t),t=T.shift(),_=T.length,t.__d&&(n=void 0,r=void 0,o=(r=(e=t).__v).__e,i=[],s=[],e.__P&&((n=k({},r)).__v=r.__v+1,d.vnode&&d.vnode(n),$e(e.__P,n,r,e.__n,e.__P.namespaceURI,32&r.__u?[o]:null,i,o??N(r),!!(32&r.__u),s),n.__v=r.__v,n.__.__k[n.__i]=n,Ot(i,n,s),r.__e=r.__=null,n.__e!=o&&Dt(n)));ue.__r=0}function Ut(t,e,n,r,o,i,s,_,u,c,f){var a,h,l,m,w,g,p,y=r&&r.__k||It,I=e.length;for(u=xn(n,e,y,u,I),a=0;a<I;a++)(l=n.__k[a])!=null&&(h=l.__i==-1?Q:y[l.__i]||Q,l.__i=a,g=$e(t,l,h,o,i,s,_,u,c,f),m=l.__e,l.ref&&h.ref!=l.ref&&(h.ref&&Re(h.ref,null,l),f.push(l.ref,l.__c||m,l)),w==null&&m!=null&&(w=m),(p=!!(4&l.__u))||h.__k===l.__k?u=Lt(l,u,t,p):typeof l.type=="function"&&g!==void 0?u=g:m&&(u=m.nextSibling),l.__u&=-7);return n.__e=w,u}function xn(t,e,n,r,o){var i,s,_,u,c,f=n.length,a=f,h=0;for(t.__k=new Array(o),i=0;i<o;i++)(s=e[i])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=t.__k[i]=G(null,s,null,null,null):te(s)?s=t.__k[i]=G($,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?s=t.__k[i]=G(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):t.__k[i]=s,u=i+h,s.__=t,s.__b=t.__b+1,_=null,(c=s.__i=Sn(s,n,u,a))!=-1&&(a--,(_=n[c])&&(_.__u|=2)),_==null||_.__v==null?(c==-1&&(o>f?h--:o<f&&h++),typeof s.type!="function"&&(s.__u|=4)):c!=u&&(c==u-1?h--:c==u+1?h++:(c>u?h--:h++,s.__u|=4))):t.__k[i]=null;if(a)for(i=0;i<f;i++)(_=n[i])!=null&&(2&_.__u)==0&&(_.__e==r&&(r=N(_)),Mt(_,_));return r}function Lt(t,e,n,r){var o,i;if(typeof t.type=="function"){for(o=t.__k,i=0;o&&i<o.length;i++)o[i]&&(o[i].__=t,e=Lt(o[i],e,n,r));return e}t.__e!=e&&(r&&(e&&t.type&&!e.parentNode&&(e=N(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function R(t,e){return e=e||[],t==null||typeof t=="boolean"||(te(t)?t.some(function(n){R(n,e)}):e.push(t)),e}function Sn(t,e,n,r){var o,i,s,_=t.key,u=t.type,c=e[n],f=c!=null&&(2&c.__u)==0;if(c===null&&_==null||f&&_==c.key&&u==c.type)return n;if(r>(f?1:0)){for(o=n-1,i=n+1;o>=0||i<e.length;)if((c=e[s=o>=0?o--:i++])!=null&&(2&c.__u)==0&&_==c.key&&u==c.type)return s}return-1}function Ve(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||bn.test(e)?n:n+"px"}function ae(t,e,n,r,o){var i,s;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||Ve(t.style,e,"");if(n)for(e in n)r&&n[e]==r[e]||Ve(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")i=e!=(e=e.replace(Rt,"$1")),s=e.toLowerCase(),e=s in t||e=="onFocusOut"||e=="onFocusIn"?s.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=n,n?r?n.u=r.u:(n.u=Ee,t.addEventListener(e,i?ge:ye,i)):t.removeEventListener(e,i?ge:ye,i);else{if(o=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Je(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=Ee++;else if(e.t<n.u)return;return n(d.event?d.event(e):e)}}}function $e(t,e,n,r,o,i,s,_,u,c){var f,a,h,l,m,w,g,p,y,I,L,ie,V,qe,se,J,he,P=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),i=[_=e.__e=n.__e]),(f=d.__b)&&f(e);e:if(typeof P=="function")try{if(p=e.props,y="prototype"in P&&P.prototype.render,I=(f=P.contextType)&&r[f.__c],L=f?I?I.props.value:f.__:r,n.__c?g=(a=e.__c=n.__c).__=a.__E:(y?e.__c=a=new P(p,L):(e.__c=a=new E(p,L),a.constructor=P,a.render=Pn),I&&I.sub(a),a.state||(a.state={}),a.__n=r,h=a.__d=!0,a.__h=[],a._sb=[]),y&&a.__s==null&&(a.__s=a.state),y&&P.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=k({},a.__s)),k(a.__s,P.getDerivedStateFromProps(p,a.__s))),l=a.props,m=a.state,a.__v=e,h)y&&P.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),y&&a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(y&&P.getDerivedStateFromProps==null&&p!==l&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(p,L),e.__v==n.__v||!a.__e&&a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(p,a.__s,L)===!1){for(e.__v!=n.__v&&(a.props=p,a.state=a.__s,a.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(A){A&&(A.__=e)}),ie=0;ie<a._sb.length;ie++)a.__h.push(a._sb[ie]);a._sb=[],a.__h.length&&s.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(p,a.__s,L),y&&a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(l,m,w)})}if(a.context=L,a.props=p,a.__P=t,a.__e=!1,V=d.__r,qe=0,y){for(a.state=a.__s,a.__d=!1,V&&V(e),f=a.render(a.props,a.state,a.context),se=0;se<a._sb.length;se++)a.__h.push(a._sb[se]);a._sb=[]}else do a.__d=!1,V&&V(e),f=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++qe<25);a.state=a.__s,a.getChildContext!=null&&(r=k(k({},r),a.getChildContext())),y&&!h&&a.getSnapshotBeforeUpdate!=null&&(w=a.getSnapshotBeforeUpdate(l,m)),J=f,f!=null&&f.type===$&&f.key==null&&(J=Tt(f.props.children)),_=Ut(t,te(J)?J:[J],e,n,r,o,i,s,_,u,c),a.base=e.__e,e.__u&=-161,a.__h.length&&s.push(a),g&&(a.__E=a.__=null)}catch(A){if(e.__v=null,u||i!=null)if(A.then){for(e.__u|=u?160:128;_&&_.nodeType==8&&_.nextSibling;)_=_.nextSibling;i[i.indexOf(_)]=null,e.__e=_}else{for(he=i.length;he--;)Pe(i[he]);be(e)}else e.__e=n.__e,e.__k=n.__k,A.then||be(e);d.__e(A,e,n)}else i==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):_=e.__e=En(n.__e,e,n,r,o,i,s,u,c);return(f=d.diffed)&&f(e),128&e.__u?void 0:_}function be(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(be)}function Ot(t,e,n){for(var r=0;r<n.length;r++)Re(n[r],n[++r],n[++r]);d.__c&&d.__c(e,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(i){i.call(o)})}catch(i){d.__e(i,o.__v)}})}function Tt(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:te(t)?t.map(Tt):k({},t)}function En(t,e,n,r,o,i,s,_,u){var c,f,a,h,l,m,w,g=n.props||Q,p=e.props,y=e.type;if(y=="svg"?o="http://www.w3.org/2000/svg":y=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),i!=null){for(c=0;c<i.length;c++)if((l=i[c])&&"setAttribute"in l==!!y&&(y?l.localName==y:l.nodeType==3)){t=l,i[c]=null;break}}if(t==null){if(y==null)return document.createTextNode(p);t=document.createElementNS(o,y,p.is&&p),_&&(d.__m&&d.__m(e,i),_=!1),i=null}if(y==null)g===p||_&&t.data==p||(t.data=p);else{if(i=i&&ee.call(t.childNodes),!_&&i!=null)for(g={},c=0;c<t.attributes.length;c++)g[(l=t.attributes[c]).name]=l.value;for(c in g)if(l=g[c],c!="children"){if(c=="dangerouslySetInnerHTML")a=l;else if(!(c in p)){if(c=="value"&&"defaultValue"in p||c=="checked"&&"defaultChecked"in p)continue;ae(t,c,null,l,o)}}for(c in p)l=p[c],c=="children"?h=l:c=="dangerouslySetInnerHTML"?f=l:c=="value"?m=l:c=="checked"?w=l:_&&typeof l!="function"||g[c]===l||ae(t,c,l,g[c],o);if(f)_||a&&(f.__html==a.__html||f.__html==t.innerHTML)||(t.innerHTML=f.__html),e.__k=[];else if(a&&(t.innerHTML=""),Ut(e.type=="template"?t.content:t,te(h)?h:[h],e,n,r,y=="foreignObject"?"http://www.w3.org/1999/xhtml":o,i,s,i?i[0]:n.__k&&N(n,0),_,u),i!=null)for(c=i.length;c--;)Pe(i[c]);_||(c="value",y=="progress"&&m==null?t.removeAttribute("value"):m!=null&&(m!==t[c]||y=="progress"&&!m||y=="option"&&m!=g[c])&&ae(t,c,m,g[c],o),c="checked",w!=null&&w!=t[c]&&ae(t,c,w,g[c],o))}return t}function Re(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(o){d.__e(o,n)}}function Mt(t,e,n){var r,o;if(d.unmount&&d.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||Re(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){d.__e(i,e)}r.base=r.__P=null}if(r=t.__k)for(o=0;o<r.length;o++)r[o]&&Mt(r[o],e,n||typeof t.type!="function");n||Pe(t.__e),t.__c=t.__=t.__e=void 0}function Pn(t,e,n){return this.constructor(t,n)}function H(t,e,n){var r,o,i,s;e==document&&(e=document.documentElement),d.__&&d.__(t,e),o=(r=typeof n=="function")?null:n&&n.__k||e.__k,i=[],s=[],$e(e,t=(!r&&n||e).__k=S($,null,[t]),o||Q,Q,e.namespaceURI,!r&&n?[n]:o?null:e.firstChild?ee.call(e.childNodes):null,i,!r&&n?n:o?o.__e:e.firstChild,r,s),Ot(i,t,s)}function At(t,e){H(t,e,At)}function kn(t,e,n){var r,o,i,s,_=k({},t.props);for(i in t.type&&t.type.defaultProps&&(s=t.type.defaultProps),e)i=="key"?r=e[i]:i=="ref"?o=e[i]:_[i]=e[i]===void 0&&s!=null?s[i]:e[i];return arguments.length>2&&(_.children=arguments.length>3?ee.call(arguments,2):n),G(t.type,_,r||t.key,o||t.ref,null)}function z(t){function e(n){var r,o;return this.getChildContext||(r=new Set,(o={})[e.__c]=this,this.getChildContext=function(){return o},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(i){this.props.value!=i.value&&r.forEach(function(s){s.__e=!0,we(s)})},this.sub=function(i){r.add(i);var s=i.componentWillUnmount;i.componentWillUnmount=function(){r&&r.delete(i),s&&s.call(i)}}),n.children}return e.__c="__cC"+Ct++,e.__=t,e.Provider=e.__l=(e.Consumer=function(n,r){return n.children(r)}).contextType=e,e}ee=It.slice,d={__e:function(t,e,n,r){for(var o,i,s;e=e.__;)if((o=e.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(t)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t,r||{}),s=o.__d),s)return o.__E=o}catch(_){t=_}throw t}},Pt=0,E.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=k({},this.state),typeof t=="function"&&(t=t(k({},n),this.props)),t&&k(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),we(this))},E.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),we(this))},E.prototype.render=$,T=[],kt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,$t=function(t,e){return t.__v.__b-e.__v.__b},ue.__r=0,Rt=/(PointerCapture)$|Capture$/i,Ee=0,ye=Je(!1),ge=Je(!0),Ct=0;var $n=0;function b(t,e,n,r,o,i){e||(e={});var s,_,u=e;if("ref"in u)for(_ in u={},e)_=="ref"?s=e[_]:u[_]=e[_];var c={type:t,props:u,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--$n,__i:-1,__u:0,__source:o,__self:i};if(typeof t=="function"&&(s=t.defaultProps))for(_ in s)u[_]===void 0&&(u[_]=s[_]);return d.vnode&&d.vnode(c),c}var C,v,de,Ye,F=0,Wt=[],x=d,Ze=x.__b,Ge=x.__r,Xe=x.diffed,Qe=x.__c,et=x.unmount,tt=x.__;function M(t,e){x.__h&&x.__h(v,t,F||e),F=0;var n=v.__H||(v.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function ne(t){return F=1,re(Nt,t)}function re(t,e,n){var r=M(C++,2);if(r.t=t,!r.__c&&(r.__=[n?n(e):Nt(void 0,e),function(_){var u=r.__N?r.__N[0]:r.__[0],c=r.t(u,_);u!==c&&(r.__N=[c,r.__[1]],r.__c.setState({}))}],r.__c=v,!v.__f)){var o=function(_,u,c){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(h){return!!h.__c});if(f.every(function(h){return!h.__N}))return!i||i.call(this,_,u,c);var a=r.__c.props!==_;return f.forEach(function(h){if(h.__N){var l=h.__[0];h.__=h.__N,h.__N=void 0,l!==h.__[0]&&(a=!0)}}),i&&i.call(this,_,u,c)||a};v.__f=!0;var i=v.shouldComponentUpdate,s=v.componentWillUpdate;v.componentWillUpdate=function(_,u,c){if(this.__e){var f=i;i=void 0,o(_,u,c),i=f}s&&s.call(this,_,u,c)},v.shouldComponentUpdate=o}return r.__N||r.__}function oe(t,e){var n=M(C++,3);!x.__s&&Le(n.__H,e)&&(n.__=t,n.u=e,v.__H.__h.push(n))}function U(t,e){var n=M(C++,4);!x.__s&&Le(n.__H,e)&&(n.__=t,n.u=e,v.__h.push(n))}function j(t){return F=5,B(function(){return{current:t}},[])}function Ce(t,e,n){F=6,U(function(){if(typeof t=="function"){var r=t(e());return function(){t(null),r&&typeof r=="function"&&r()}}if(t)return t.current=e(),function(){return t.current=null}},n==null?n:n.concat(t))}function B(t,e){var n=M(C++,7);return Le(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function Ie(t,e){return F=8,B(function(){return t},e)}function q(t){var e=v.context[t.__c],n=M(C++,9);return n.c=t,e?(n.__==null&&(n.__=!0,e.sub(v)),e.props.value):t.__}function De(t,e){x.useDebugValue&&x.useDebugValue(e?e(t):t)}function Rn(t){var e=M(C++,10),n=ne();return e.__=t,v.componentDidCatch||(v.componentDidCatch=function(r,o){e.__&&e.__(r,o),n[1](r)}),[n[0],function(){n[1](void 0)}]}function Ue(){var t=M(C++,11);if(!t.__){for(var e=v.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var n=e.__m||(e.__m=[0,0]);t.__="P"+n[0]+"-"+n[1]++}return t.__}function Cn(){for(var t;t=Wt.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(ce),t.__H.__h.forEach(xe),t.__H.__h=[]}catch(e){t.__H.__h=[],x.__e(e,t.__v)}}x.__b=function(t){v=null,Ze&&Ze(t)},x.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),tt&&tt(t,e)},x.__r=function(t){Ge&&Ge(t),C=0;var e=(v=t.__c).__H;e&&(de===v?(e.__h=[],v.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(ce),e.__h.forEach(xe),e.__h=[],C=0)),de=v},x.diffed=function(t){Xe&&Xe(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Wt.push(e)!==1&&Ye===x.requestAnimationFrame||((Ye=x.requestAnimationFrame)||In)(Cn)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),de=v=null},x.__c=function(t,e){e.some(function(n){try{n.__h.forEach(ce),n.__h=n.__h.filter(function(r){return!r.__||xe(r)})}catch(r){e.some(function(o){o.__h&&(o.__h=[])}),e=[],x.__e(r,n.__v)}}),Qe&&Qe(t,e)},x.unmount=function(t){et&&et(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{ce(r)}catch(o){e=o}}),n.__H=void 0,e&&x.__e(e,n.__v))};var nt=typeof requestAnimationFrame=="function";function In(t){var e,n=function(){clearTimeout(r),nt&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,35);nt&&(e=requestAnimationFrame(n))}function ce(t){var e=v,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),v=e}function xe(t){var e=v;t.__c=t.__(),v=e}function Le(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function Nt(t,e){return typeof e=="function"?e(t):e}let O,Y;const Dn=(t,e)=>{if(O=void 0,e&&e.type==="click"){if(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button!==0)return t;const n=e.composedPath().find(o=>o.nodeName=="A"&&o.href),r=n&&n.getAttribute("href");if(!n||n.origin!=location.origin||/^#/.test(r)||!/^(_?self)?$/i.test(n.target)||Y&&(typeof Y=="string"?!r.startsWith(Y):!Y.test(r)))return t;O=!0,e.preventDefault(),e=n.href.replace(location.origin,"")}else typeof e=="string"?O=!0:e&&e.url?(O=!e.replace,e=e.url):e=location.pathname+location.search;return O===!0?history.pushState(null,"",e):O===!1&&history.replaceState(null,"",e),e};function fe(t){const[e,n]=re(Dn,t.url||location.pathname+location.search);t.scope&&(Y=t.scope);const r=O===!0,o=B(()=>{const i=new URL(e,location.origin),s=i.pathname.replace(/\/+$/g,"")||"/";return{url:e,path:s,query:Object.fromEntries(i.searchParams),route:(_,u)=>n({url:_,replace:u}),wasPush:r}},[e]);return U(()=>(addEventListener("click",n),addEventListener("popstate",n),()=>{removeEventListener("click",n),removeEventListener("popstate",n)}),[]),S(fe.ctx.Provider,{value:o},t.children)}Promise.resolve();fe.ctx=z({});z({});const Un=()=>q(fe.ctx),rt=d.__b;d.__b=t=>{t.type&&t.type._forwarded&&t.ref&&(t.props.ref=t.ref,t.ref=null),rt&&rt(t)};const ot=d.__e;d.__e=(t,e,n)=>{if(t&&t.then){let r=e;for(;r=r.__;)if(r.__c&&r.__c.__c)return e.__e==null&&(e.__c.__z=[n.__e],e.__e=n.__e,e.__k=n.__k),e.__k||(e.__k=[]),r.__c.__c(t,e)}ot&&ot(t,e,n)};function Ln(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,o,i,s=[],_="",u=t.split("/");for(u[0]||u.shift();o=u.shift();)n=o[0],n==="*"?(s.push(n),_+=o[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=o.indexOf("?",1),i=o.indexOf(".",1),s.push(o.substring(1,~r?r:~i?i:o.length)),_+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(_+=(~r?"?":"")+"\\"+o.substring(i))):_+="/"+o;return{keys:s,pattern:new RegExp("^"+_+(e?"(?=$|/)":"/?$"),"i")}}function Ht(t,e){for(var n in e)t[n]=e[n];return t}function Se(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var r in e)if(r!=="__source"&&t[r]!==e[r])return!0;return!1}function Oe(t,e){var n=e(),r=ne({t:{__:n,u:e}}),o=r[0].t,i=r[1];return U(function(){o.__=n,o.u=e,pe(o)&&i({t:o})},[t,n,e]),oe(function(){return pe(o)&&i({t:o}),t(function(){pe(o)&&i({t:o})})},[t]),n}function pe(t){var e,n,r=t.u,o=t.__;try{var i=r();return!((e=o)===(n=i)&&(e!==0||1/e==1/n)||e!=e&&n!=n)}catch{return!0}}function Te(t){t()}function Me(t){return t}function Ae(){return[!1,Te]}var We=U;function le(t,e){this.props=t,this.context=e}function Ft(t,e){function n(o){var i=this.props.ref,s=i==o.ref;return!s&&i&&(i.call?i(null):i.current=null),e?!e(this.props,o)||!s:Se(this.props,o)}function r(o){return this.shouldComponentUpdate=n,S(t,o)}return r.displayName="Memo("+(t.displayName||t.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r.type=t,r}(le.prototype=new E).isPureReactComponent=!0,le.prototype.shouldComponentUpdate=function(t,e){return Se(this.props,t)||Se(this.state,e)};var it=d.__b;d.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),it&&it(t)};var On=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Ne(t){function e(n){var r=Ht({},n);return delete r.ref,t(r,n.ref||null)}return e.$$typeof=On,e.render=t,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}var st=function(t,e){return t==null?null:R(R(t).map(e))},zt={map:st,forEach:st,count:function(t){return t?R(t).length:0},only:function(t){var e=R(t);if(e.length!==1)throw"Children.only";return e[0]},toArray:R},Tn=d.__e;d.__e=function(t,e,n,r){if(t.then){for(var o,i=e;i=i.__;)if((o=i.__c)&&o.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),o.__c(t,e)}Tn(t,e,n,r)};var at=d.unmount;function jt(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),t.__c.__H=null),(t=Ht({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(r){return jt(r,e,n)})),t}function Bt(t,e,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(r){return Bt(r,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function X(){this.__u=0,this.o=null,this.__b=null}function qt(t){if(!t.__)return null;var e=t.__.__c;return e&&e.__a&&e.__a(t)}function Kt(t){var e,n,r,o=null;function i(s){if(e||(e=t()).then(function(_){_&&(o=_.default||_),r=!0},function(_){n=_,r=!0}),n)throw n;if(!r)throw e;return o?S(o,s):null}return i.displayName="Lazy",i.__f=!0,i}function W(){this.i=null,this.l=null}d.unmount=function(t){var e=t.__c;e&&(e.__z=!0),e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),at&&at(t)},(X.prototype=new E).__c=function(t,e){var n=e.__c,r=this;r.o==null&&(r.o=[]),r.o.push(n);var o=qt(r.__v),i=!1,s=function(){i||r.__z||(i=!0,n.__R=null,o?o(u):u())};n.__R=s;var _=n.__P;n.__P=null;var u=function(){if(!--r.__u){if(r.state.__a){var c=r.state.__a;r.__v.__k[0]=Bt(c,c.__c.__P,c.__c.__O)}var f;for(r.setState({__a:r.__b=null});f=r.o.pop();)f.__P=_,f.forceUpdate()}};r.__u++||32&e.__u||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(s,s)},X.prototype.componentWillUnmount=function(){this.o=[]},X.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=jt(this.__b,n,r.__O=r.__P)}this.__b=null}var o=e.__a&&S($,null,t.fallback);return o&&(o.__u&=-33),[S($,null,e.__a?null:t.children),o]};var _t=function(t,e,n){if(++n[1]===n[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};function Mn(t){return this.getChildContext=function(){return t.context},t.children}function An(t){var e=this,n=t.h;if(e.componentWillUnmount=function(){H(null,e.v),e.v=null,e.h=null},e.h&&e.h!==n&&e.componentWillUnmount(),!e.v){for(var r=e.__v;r!==null&&!r.__m&&r.__!==null;)r=r.__;e.h=n,e.v={nodeType:1,parentNode:n,childNodes:[],__k:{__m:r.__m},contains:function(){return!0},namespaceURI:n.namespaceURI,insertBefore:function(o,i){this.childNodes.push(o),e.h.insertBefore(o,i)},removeChild:function(o){this.childNodes.splice(this.childNodes.indexOf(o)>>>1,1),e.h.removeChild(o)}}}H(S(Mn,{context:e.context},t.__v),e.v)}function Vt(t,e){var n=S(An,{__v:t,h:e});return n.containerInfo=e,n}(W.prototype=new E).__a=function(t){var e=this,n=qt(e.__v),r=e.l.get(t);return r[0]++,function(o){var i=function(){e.props.revealOrder?(r.push(o),_t(e,t,r)):o()};n?n(i):i()}},W.prototype.render=function(t){this.i=null,this.l=new Map;var e=R(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return t.children},W.prototype.componentDidUpdate=W.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,n){_t(t,n,e)})};var Jt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Wn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Nn=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Hn=/[A-Z0-9]/g,Fn=typeof document<"u",zn=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};function Yt(t,e,n){return e.__k==null&&(e.textContent=""),H(t,e),typeof n=="function"&&n(),t?t.__c:null}function Zt(t,e,n){return At(t,e),typeof n=="function"&&n(),t?t.__c:null}E.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(E.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var ct=d.event;function jn(){}function Bn(){return this.cancelBubble}function qn(){return this.defaultPrevented}d.event=function(t){return ct&&(t=ct(t)),t.persist=jn,t.isPropagationStopped=Bn,t.isDefaultPrevented=qn,t.nativeEvent=t};var He,Kn={enumerable:!1,configurable:!0,get:function(){return this.class}},ut=d.vnode;d.vnode=function(t){typeof t.type=="string"&&function(e){var n=e.props,r=e.type,o={},i=r.indexOf("-")===-1;for(var s in n){var _=n[s];if(!(s==="value"&&"defaultValue"in n&&_==null||Fn&&s==="children"&&r==="noscript"||s==="class"||s==="className")){var u=s.toLowerCase();s==="defaultValue"&&"value"in n&&n.value==null?s="value":s==="download"&&_===!0?_="":u==="translate"&&_==="no"?_=!1:u[0]==="o"&&u[1]==="n"?u==="ondoubleclick"?s="ondblclick":u!=="onchange"||r!=="input"&&r!=="textarea"||zn(n.type)?u==="onfocus"?s="onfocusin":u==="onblur"?s="onfocusout":Nn.test(s)&&(s=u):u=s="oninput":i&&Wn.test(s)?s=s.replace(Hn,"-$&").toLowerCase():_===null&&(_=void 0),u==="oninput"&&o[s=u]&&(s="oninputCapture"),o[s]=_}}r=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=R(n.children).forEach(function(c){c.props.selected=o.value.indexOf(c.props.value)!=-1})),r=="select"&&o.defaultValue!=null&&(o.value=R(n.children).forEach(function(c){c.props.selected=o.multiple?o.defaultValue.indexOf(c.props.value)!=-1:o.defaultValue==c.props.value})),n.class&&!n.className?(o.class=n.class,Object.defineProperty(o,"className",Kn)):(n.className&&!n.class||n.class&&n.className)&&(o.class=o.className=n.className),e.props=o}(t),t.$$typeof=Jt,ut&&ut(t)};var lt=d.__r;d.__r=function(t){lt&&lt(t),He=t.__c};var ft=d.diffed;d.diffed=function(t){ft&&ft(t);var e=t.props,n=t.__e;n!=null&&t.type==="textarea"&&"value"in e&&e.value!==n.value&&(n.value=e.value==null?"":e.value),He=null};var Gt={ReactCurrentDispatcher:{current:{readContext:function(t){return He.__n[t.__c].props.value},useCallback:Ie,useContext:q,useDebugValue:De,useDeferredValue:Me,useEffect:oe,useId:Ue,useImperativeHandle:Ce,useInsertionEffect:We,useLayoutEffect:U,useMemo:B,useReducer:re,useRef:j,useState:ne,useSyncExternalStore:Oe,useTransition:Ae}}},Vn="18.3.1";function Xt(t){return S.bind(null,t)}function K(t){return!!t&&t.$$typeof===Jt}function Qt(t){return K(t)&&t.type===$}function en(t){return!!t&&!!t.displayName&&(typeof t.displayName=="string"||t.displayName instanceof String)&&t.displayName.startsWith("Memo(")}function Fe(t){return K(t)?kn.apply(null,arguments):t}function tn(t){return!!t.__k&&(H(null,t),!0)}function nn(t){return t&&(t.base||t.nodeType===1&&t)||null}var rn=function(t,e){return t(e)},on=function(t,e){return t(e)},sn=$,an=K,Jn={useState:ne,useId:Ue,useReducer:re,useEffect:oe,useLayoutEffect:U,useInsertionEffect:We,useTransition:Ae,useDeferredValue:Me,useSyncExternalStore:Oe,startTransition:Te,useRef:j,useImperativeHandle:Ce,useMemo:B,useCallback:Ie,useContext:q,useDebugValue:De,version:"18.3.1",Children:zt,render:Yt,hydrate:Zt,unmountComponentAtNode:tn,createPortal:Vt,createElement:S,createContext:z,createFactory:Xt,cloneElement:Fe,createRef:ke,Fragment:$,isValidElement:K,isElement:an,isFragment:Qt,isMemo:en,findDOMNode:nn,Component:E,PureComponent:le,memo:Ft,forwardRef:Ne,flushSync:on,unstable_batchedUpdates:rn,StrictMode:sn,Suspense:X,SuspenseList:W,lazy:Kt,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Gt};const _n=Object.freeze(Object.defineProperty({__proto__:null,Children:zt,Component:E,Fragment:$,PureComponent:le,StrictMode:sn,Suspense:X,SuspenseList:W,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Gt,cloneElement:Fe,createContext:z,createElement:S,createFactory:Xt,createPortal:Vt,createRef:ke,default:Jn,findDOMNode:nn,flushSync:on,forwardRef:Ne,hydrate:Zt,isElement:an,isFragment:Qt,isMemo:en,isValidElement:K,lazy:Kt,memo:Ft,render:Yt,startTransition:Te,unmountComponentAtNode:tn,unstable_batchedUpdates:rn,useCallback:Ie,useContext:q,useDebugValue:De,useDeferredValue:Me,useEffect:oe,useErrorBoundary:Rn,useId:Ue,useImperativeHandle:Ce,useInsertionEffect:We,useLayoutEffect:U,useMemo:B,useReducer:re,useRef:j,useState:ne,useSyncExternalStore:Oe,useTransition:Ae,version:Vn},Symbol.toStringTag,{value:"Module"}));function Yn(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var me={exports:{}},ve={};const Zn=Yn(_n);/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ht;function Gn(){if(ht)return ve;ht=1;var t=Zn;function e(a,h){return a===h&&(a!==0||1/a===1/h)||a!==a&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,o=t.useEffect,i=t.useLayoutEffect,s=t.useDebugValue;function _(a,h){var l=h(),m=r({inst:{value:l,getSnapshot:h}}),w=m[0].inst,g=m[1];return i(function(){w.value=l,w.getSnapshot=h,u(w)&&g({inst:w})},[a,l,h]),o(function(){return u(w)&&g({inst:w}),a(function(){u(w)&&g({inst:w})})},[a]),s(l),l}function u(a){var h=a.getSnapshot;a=a.value;try{var l=h();return!n(a,l)}catch{return!0}}function c(a,h){return h()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:_;return ve.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,ve}var dt;function Xn(){return dt||(dt=1,me.exports=Gn()),me.exports}var cn=Xn();const Qn=_n.useInsertionEffect,er=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tr=er?U:oe,nr=Qn||tr,un=t=>{const e=j([t,(...n)=>e[0](...n)]).current;return nr(()=>{e[0]=t}),e[1]},rr="popstate",ze="pushState",je="replaceState",or="hashchange",pt=[rr,ze,je,or],ir=t=>{for(const e of pt)addEventListener(e,t);return()=>{for(const e of pt)removeEventListener(e,t)}},ln=(t,e)=>cn.useSyncExternalStore(ir,t,e),mt=()=>location.search,sr=({ssrSearch:t}={})=>ln(mt,t!=null?()=>t:mt),vt=()=>location.pathname,ar=({ssrPath:t}={})=>ln(vt,t!=null?()=>t:vt),_r=(t,{replace:e=!1,state:n=null}={})=>history[e?je:ze](n,"",t),cr=(t={})=>[ar(t),_r],yt=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[yt]>"u"){for(const t of[ze,je]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,yt,{value:!0})}const ur=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",fn=(t="")=>t==="/"?"":t,lr=(t,e)=>t[0]==="~"?t.slice(1):fn(e)+t,fr=(t="",e)=>ur(gt(fn(t)),gt(e)),gt=t=>{try{return decodeURI(t)}catch{return t}},hn={hook:cr,searchHook:sr,parser:Ln,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t,aroundNav:(t,e,n)=>t(e,n)},dn=z(hn),Be=()=>q(dn),pn={},mn=z(pn),vn=()=>q(mn),yn=t=>{const[e,n]=t.hook(t);return[fr(t.base,e),un((r,o)=>t.aroundNav(n,lr(r,t.base),o))]},hr=(t,e,n,r)=>{const{pattern:o,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),s=o.exec(n)||[],[_,...u]=s;return _!==void 0?[!0,(()=>{const c=i!==!1?Object.fromEntries(i.map((a,h)=>[a,u[h]])):s.groups;let f={...u};return c&&Object.assign(f,c),f})(),...r?[_]:[]]:[!1,null]},gn=({children:t,...e})=>{var f,a,h;const n=Be(),r=e.hook?hn:n;let o=r;const[i,s=e.ssrSearch??""]=((f=e.ssrPath)==null?void 0:f.split("?"))??[];i&&(e.ssrSearch=s,e.ssrPath=i),e.hrefs=e.hrefs??((a=e.hook)==null?void 0:a.hrefs),e.searchHook=e.searchHook??((h=e.hook)==null?void 0:h.searchHook);let _=j({}),u=_.current,c=u;for(let l in r){const m=l==="base"?r[l]+(e[l]??""):e[l]??r[l];u===c&&m!==c[l]&&(_.current=c={...c}),c[l]=m,(m!==r[l]||m!==o[l])&&(o=c)}return S(dn.Provider,{value:o,children:t})},wt=({children:t,component:e},n)=>e?S(e,{params:n}):typeof t=="function"?t(n):t,dr=t=>{let e=j(pn);const n=e.current;return e.current=Object.keys(t).length!==Object.keys(n).length||Object.entries(t).some(([r,o])=>o!==n[r])?t:n},bt=({path:t,nest:e,match:n,...r})=>{const o=Be(),[i]=yn(o),[s,_,u]=n??hr(o.parser,t,i,e),c=dr({...vn(),..._});if(!s)return null;const f=u?S(gn,{base:u},wt(r,c)):wt(r,c);return S(mn.Provider,{value:c,children:f})};Ne((t,e)=>{const n=Be(),[r,o]=yn(n),{to:i="",href:s=i,onClick:_,asChild:u,children:c,className:f,replace:a,state:h,transition:l,...m}=t,w=un(p=>{p.ctrlKey||p.metaKey||p.altKey||p.shiftKey||p.button!==0||(_==null||_(p),p.defaultPrevented||(p.preventDefault(),o(s,t)))}),g=n.hrefs(s[0]==="~"?s.slice(1):n.base+s,n);return u&&K(c)?Fe(c,{onClick:w,href:g}):S("a",{...m,onClick:w,href:g,className:f!=null&&f.call?f(r===s):f,children:c,ref:e})});const Z={v:[]},xt=()=>Z.v.forEach(t=>t()),pr=t=>(Z.v.push(t)===1&&addEventListener("hashchange",xt),()=>{Z.v=Z.v.filter(e=>e!==t),Z.v.length||removeEventListener("hashchange",xt)}),mr=()=>"/"+location.hash.replace(/^#?\/?/,""),vr=(t,{state:e=null,replace:n=!1}={})=>{const r=location.href,[o,i]=t.replace(/^#?\/?/,"").split("?"),s=new URL(location.href);s.hash=`/${o}`,i&&(s.search=i);const _=s.href;n?history.replaceState(e,"",_):history.pushState(e,"",_);const u=typeof HashChangeEvent<"u"?new HashChangeEvent("hashchange",{oldURL:r,newURL:_}):new Event("hashchange",{detail:{oldURL:r,newURL:_}});dispatchEvent(u)},wn=({ssrPath:t="/"}={})=>[cn.useSyncExternalStore(pr,mr,()=>t),vr];wn.hrefs=t=>"#"+t;function yr(){const{url:t}=Un(),e=new URL(window.location.href);return b("header",{children:b("nav",{children:[b("a",{href:"/",class:t=="/"&&"active",children:"OpenTier"}),b("span",{children:e.pathname})]})})}function gr(){return b("div",{class:"home",children:b("h1",{children:"OpenTier"})})}class D{constructor(e=0,n=0){this.set(e,n)}sub(e){return this.x-=e.x,this.y-=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}set(e=0,n=0){return this.x=e,this.y=n,this}copy(e){return this.set(e.x,e.y),this}scale(e){return this.x*=e,this.y*=e,this}mul(e){return this.x*=e.x,this.y*=e.y,this}div(e){return this.x/=e.x,this.y/=e.y,this}mag(){return Math.abs(Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)))}lerp(e,n=1){return this.x=St(this.x,e.x,n),this.y=St(this.y,e.y,n),this}dist(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}}const St=(t,e,n)=>t*(1-n)+e*n,Et=new Map;class wr{constructor(e){this.waiting=new Set,new Promise(e).then(n=>{this.resolve(n,void 0)}).catch(n=>{this.resolve(void 0,n)})}resolve(e,n){this.v=e,this.reason=n;for(const r of this.waiting)r(e,n);this.waiting.clear()}then(e){this.v||this.reason?e(this.v,this.reason):this.waiting.add(e)}}function br(t){let e=Et.get(t);return e||(e=new wr((n,r)=>{console.log("loading",t);const o=new Image;o.src=t,o.addEventListener("load",i=>{n(o)}),o.addEventListener("error",i=>{r(i.error)})}),Et.set(t,e)),console.log("get",t),e}function xr(t){let e=2166136261;for(let n=0;n<t.length;n++)e^=t.charCodeAt(n),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return(e>>>0).toString(16)}function Sr(t){const e=JSON.stringify(t,(n,r)=>{if(!(n==="column"||n==="row"||n==="id"))return r});return xr(e)}class Er{constructor(){this.targetPosition=new D,this.position=new D,this.data={},this.width=1,this.height=1}setData(e,n){if(this.data=e,!!this.data)return this.targetPosition.set(this.data.column,this.data.row),this.data.imageUrl&&br(this.data.imageUrl).then((r,o)=>{this.image=r}),this.data.id=n+Sr(this.data),this}render(e,n=!1){this.position.lerp(this.targetPosition,.1),this.image?e.drawImage(this.image,0,0,1,1):(e.fillStyle=this.data.bg,e.fillRect(0,0,this.width,this.height),e.fillStyle=this.data.fg,e.textAlign="center",e.textBaseline="middle",e.fillText(this.data.text,.5,.5,1));const r=.02;return n&&(e.strokeStyle="white",e.lineWidth*=10,e.strokeRect(0-r,0-r,1+r*2,1+r*2)),this.position.dist(this.targetPosition)>.025}}class Pr{constructor(e,n="untitled",r=""){this.items=new Set,this.id=e,this.name=n,this.ownerid=r,this.owner={id:r,username:"OpenTier"}}}const _e="/opentier/";function kr(t){const r=new DOMParser().parseFromString(t,"text/html").querySelector("img");return r?r.src:""}class $r extends E{constructor(){super(),this.needsRedraw=!0,this.canvasRef=ke(),this.zoomAmount=1/6,this.zoomWheelRate=1/1e3,this.zoomMin=.01,this.zoomMax=1,this.translation=new D,this.ratio=1,this.pointerDom=new D,this.pointerRender=new D,this.pointerWorld=new D,this.pointerWorldPrev=new D,this.pointerWorldDelta=new D,this.pointerIsDown=!1;const e=new Pr("placeholder","Demo Tier","abcde");this.state={list:e}}item(e){const n=e.column,r=e.row;e.column=Math.floor(e.column),e.row=Math.floor(e.row);const o=new Er().setData(e,this.getKeyPrefix());o.position.set(n,r),this.state.list.items.add(o),this.saveItem(o.data.id,o.data)}renderCanvas(){this.needsRedraw=!1;const e=this.ctx,n=this.canvasRef.current;if(n||console.warn("no canvas?"),n==null)return;this.ratio=n.height/n.width,e.save(),e.lineWidth=1/n.height*2,e.scale(n.height,n.height),e.clearRect(0,0,1/this.ratio,1),e.fillStyle="white";const r=(this.zoomAmount*100).toFixed(0);let o=1;e.save(),e.scale(this.zoomAmount,this.zoomAmount),e.translate(this.translation.x,this.translation.y),o=.5,e.font=`${o}px courier`;for(const i of this.state.list.items)e.save(),e.translate(i.position.x,i.position.y),i.render(e,this.selectedItem==i)&&(this.needsRedraw=!0),e.restore();e.strokeRect(this.pointerWorld.x,this.pointerWorld.y,.05,.05),e.restore(),o=.03,e.font=`${o}px courier`,e.fillText(`Zoom: ${r}%`,.025,.05),this.needsRedraw&&(e.strokeStyle="red",e.strokeRect(0,0,.01,.01)),e.restore()}fixCanvasRes(){const e=this.canvasRef.current,n=e.parentElement;e.style.display="none";const r=n.getBoundingClientRect(),o=r.width,i=r.height;e.width=Math.floor(o),e.height=Math.floor(i),e.style.width=e.width+"px",e.style.height=e.height+"px",e.style.display="unset",this.needsRedraw=!0}componentDidMount(){const e=this.canvasRef.current;this.ctx=e.getContext("2d"),window.onresize=()=>{this.fixCanvasRes()},this.onAnimationFrame=n=>{window.requestAnimationFrame(this.onAnimationFrame),this.needsRedraw&&this.renderCanvas()},window.requestAnimationFrame(this.onAnimationFrame),setInterval(()=>{this.needsRedraw=!0},1e3),setTimeout(()=>{this.fixCanvasRes()},500)}onPointerDown(){}findItemUnderPointer(){for(const e of this.state.list.items)if(this.pointerWorld.y>e.targetPosition.y&&this.pointerWorld.y<e.targetPosition.y+1&&this.pointerWorld.x>e.targetPosition.x&&this.pointerWorld.x<e.targetPosition.x+1)return e;return null}onPointerUp(){this.selectedItemMove=!1;const e=this.findItemUnderPointer();if(e==null){this.selectedItem=null;return}this.selectedItem?(this.needsRedraw=!0,this.saveItem(this.selectedItem.data.id,this.selectedItem.data),this.selectedItem=null):this.selectedItem=e}domToRender(e){const n=this.canvasRef.current;e.x/=n.height,e.y/=n.height}renderToWorld(e){e.scale(1/this.zoomAmount),e.sub(this.translation)}domToWorld(e){this.domToRender(e),this.renderToWorld(e)}pointerEventUpdatePosition(e){this.pointerWorldPrev.copy(this.pointerWorld),this.pointerDom.set(e.offsetX,e.offsetY),this.pointerRender.copy(this.pointerDom),this.domToRender(this.pointerRender),this.pointerWorld.copy(this.pointerRender),this.renderToWorld(this.pointerWorld),this.pointerWorldDelta.set(e.movementX,e.movementY),this.domToRender(this.pointerWorldDelta),this.pointerWorldDelta.scale(1/this.zoomAmount)}renderDrawerItem(e){return b("img",{class:"item",src:e.imageUrl,onDragStart:n=>{n.dataTransfer.setData("text/plain",e.id)}})}renderDrawerItems(){const e=[];for(const n of this.state.list.items)e.push(this.renderDrawerItem(n.data));return e}renderItemAction(e,n,r){return b("div",{class:"item-action",onClick:()=>{r(this.selectedItem)},children:[b("div",{class:"item-action-icon",style:{backgroundImage:`url("${n}")`}}),e&&b("span",{children:e})]})}getKeyPrefix(){return`${this.state.list.id}:`}saveItemLocalStorage(e,n){if(!n){localStorage.removeItem(e);return}const r=JSON.stringify(n);console.log("save item",e,r),localStorage.setItem(e,r)}saveItem(e,n){return this.saveItemLocalStorage(e,n)}save(){const e=this.state.list.items,n=this.getKeyPrefix();for(let o=0;o<localStorage.length;o++){const i=localStorage.key(o);i.startsWith(n)&&localStorage.removeItem(i)}let r=0;for(const o of e){const i=`${n}${r}`;this.saveItem(i,o.data),r++}}restoreFromLocalStorage(){const e=this.getKeyPrefix();let n=0;for(let r=0;r<localStorage.length;r++){const o=localStorage.key(r);if(!o.startsWith(e))continue;const i=localStorage.getItem(o),s=JSON.parse(i);n++,this.item(s)}return n}restore(){return this.restoreFromLocalStorage()}render(){const{tierid:e}=vn();this.state.list.id=e;const n=this.restore();return console.log("restore count",n),n<1&&(this.item({bg:"red",fg:"white",text:"S",column:0,row:0}),this.item({bg:"orange",fg:"white",text:"A",column:0,row:1}),this.item({bg:"yellow",fg:"white",text:"B",column:0,row:2}),this.item({bg:"green",fg:"white",text:"C",column:0,row:3}),this.item({bg:"blue",fg:"white",text:"D",column:0,row:4}),this.item({bg:"purple",fg:"white",text:"F",column:0,row:5})),b("div",{class:"tier",children:b("div",{class:"col",style:{flex:1},children:[b("div",{class:"row",style:{flex:1},children:b("div",{class:"container",children:b("canvas",{ref:this.canvasRef,onWheel:r=>{this.zoomAmount-=r.deltaY*this.zoomWheelRate*this.zoomAmount,this.zoomAmount<this.zoomMin?this.zoomAmount=this.zoomMin:this.zoomAmount>this.zoomMax&&(this.zoomAmount=this.zoomMax),this.needsRedraw=!0},onPointerDown:r=>{this.pointerEventUpdatePosition(r),this.onPointerDown(),this.pointerIsDown=!0},onPointerUp:r=>{this.pointerEventUpdatePosition(r),this.onPointerUp(),this.pointerIsDown=!1},onPointerMove:r=>{this.pointerEventUpdatePosition(r),this.selectedItem&&this.selectedItemMove?(this.selectedItem.data.column=this.selectedItem.targetPosition.x=Math.floor(this.pointerWorld.x),this.selectedItem.data.row=this.selectedItem.targetPosition.y=Math.floor(this.pointerWorld.y)):this.pointerIsDown&&this.translation.add(this.pointerWorldDelta),this.needsRedraw=!0},onDragOver:r=>{r.preventDefault()},onDrop:r=>{r.preventDefault(),this.pointerEventUpdatePosition(r);const o=r.dataTransfer.getData("text/html");if(r.dataTransfer.getData("text/uri-list"),r.dataTransfer.getData("text/plain"),o){const i=kr(o);this.item({fg:"black",bg:"white",text:"x",column:this.pointerWorld.x,row:this.pointerWorld.y,imageUrl:i})}}})})}),b("div",{class:"item-actions",children:[this.renderItemAction("info",`${_e}icon_info.svg`,r=>{}),this.renderItemAction("move",`${_e}icon_move.svg`,r=>{this.selectedItem&&(this.selectedItemMove=!0)}),this.renderItemAction("delete",`${_e}icon_delete.svg`,r=>{this.selectedItem&&(this.state.list.items.delete(this.selectedItem),this.save())}),this.renderItemAction("clear",`${_e}icon_clear.svg`,r=>{confirm("Clear everything?")&&(this.state.list.items.clear(),this.save())})]})]})})}}window.addEventListener("wheel",t=>{t.preventDefault()},{passive:!1});window.addEventListener("touchstart",t=>{t.preventDefault()},{passive:!1});function Rr(){return b(fe,{children:[b(yr,{}),b("main",{children:b(gn,{hook:wn,children:[b(bt,{path:"/",component:gr}),b(bt,{path:"/:tierid",component:$r})]})})]})}H(b(Rr,{}),document.getElementById("app"));
